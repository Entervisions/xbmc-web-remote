<?xml version="1.0"?>
<project name="XBMC-Remote" basedir="./">

	<property file="build.properties"/>


    <target name="package_web" depends="clean" description="Create package for Web">

        <delete dir="${target.folder}/${project_name}" />

        <copy todir="${target.folder}/${project_name}/">
            <fileset dir="${src.folder}/"/>
        </copy>

        <replace file="${target.folder}/${project_name}/js/enum.js" token="@allow_popout" value="false"/>

    </target>

	<target name="package_chrome_extension_zip" depends="clean, package_chrome_extension" description="Package .zip for Chrome Webstore">
        <zip destfile="${chrome_extension.folder}/${project_name}.zip"
             basedir="${chrome_extension.folder}/${project_name}/"
                />
	</target>

    <target name="package_chrome_extension" depends="clean" description="Package folder for Chrome extension developer mode">
        <mkdir dir="${chrome_extension.folder}/${project_name}/"/>

        <copy todir="${chrome_extension.folder}/${project_name}/">
            <fileset dir="${src.folder}/"/>
        </copy>

        <copy todir="${chrome_extension.folder}/${project_name}/">
            <fileset file="res/manifest.json"/>
        </copy>

        <replace file="${chrome_extension.folder}/${project_name}/js/enum.js" token="@allow_popout" value="true"/>

    </target>


	<target name="clean" description="remove target folder">
		<delete dir="${target.folder}" />
	</target>

    <target name="run" description="Run remote control in a web browser">
        <exec executable="${browser.path}" spawn="true">
            <arg value="${target.folder}/${project_name}/remote.html"/>
        </exec>
    </target>


    <target name="package" depends="clean, package_web, package_chrome_extension, package_chrome_extension_zip" description="Package all">

    </target>

</project>
